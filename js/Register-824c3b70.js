import{A as e,a7 as a}from"./default-37a9e99b.js";import{a as t,_ as s,F as r}from"./index-db67493e.js";import{I as l}from"./index-06df1089.js";/* empty css              */import{a as n,_ as i,d as o,x as u,b as c,g as d,o as p,i as m,j as h,w as f,c as v,l as g,a7 as w,u as y,a5 as _,r as b,p as j,m as x}from"./index-44b8c168.js";import{B as P}from"./button-ed781189.js";import{_ as O}from"./Password-b05c897f.js";import"./FormItemContext-0fd4b304.js";import"./responsiveObserve-0d8f2852.js";import"./useSize-6eea6dc5.js";import"./wave-375d7f7d.js";const z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"};function C(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},s=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),s.forEach((function(a){k(e,a,t[a])}))}return e}function k(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var I=function(a,t){var s=C({},a,t.attrs);return n(e,C({},s,{icon:z}),null)};I.displayName="UserAddOutlined",I.inheritAttrs=!1;const T=I,U=t.create();async function q(e){return U.request(e).then((e=>e.data))}U.defaults.baseURL="http://localhost:8888",U.defaults.timeout=8e3,U.defaults.withCredentials=!1,U.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",U.defaults.validateStatus=e=>e>=200&&e<=400,U.interceptors.request.use((e=>(e.headers.Authorization=window.localStorage.getItem("_AUTH_TOKEN")||"",e)),(()=>Promise.reject(new Error("请求未发送")))),U.interceptors.response.use((e=>e),(e=>window.navigator.onLine?e.response?(401===e.response.status?a.error("用户未认证").then():403===e.response.status?a.error("token过期了").then():404===e.response.status?a.error("访问内容不存在").then():500===e.response.status&&a.error("系统繁忙，请稍后再试").then(),Promise.reject(e)):(a.error("系统繁忙，请稍后再试").then(),Promise.reject(e)):(a.error("网络异常，请检查网络").then(),Promise.reject(e))));const A={class:"bac-cover"},S={class:"login-wrap"},F={class:"login"},G=(e=>(j("data-v-6f15006e"),e=e(),x(),e))((()=>h("p",{class:"title animate__animated animate__bounceInLeft"},"注册",-1))),E={style:{display:"flex",gap:"20px","justify-content":"space-between","align-items":"stretch"}},L={style:{display:"flex",gap:"20px","justify-content":"space-between","align-items":"stretch"}},M={style:{border:"none",padding:"0",outline:"none",margin:"0",display:"inline-block","flex-shrink":"0",width:"100px"}},R=["src"],B=i(o({__name:"Register",setup(e){_();const a=u({username:"",email:"",emailCaptcha:"",password:"",rePassword:"",captcha:""}),t=u({isGetting:!1,restTime:60}),i=c(""),o=()=>{t.isGetting=!0;const e=setInterval((()=>{t.restTime<=0&&(window.clearInterval(e),t.isGetting=!1,t.restTime=60),t.restTime-=1}),1e3);q({url:"v1/api/email/captcha",method:"POST",data:{email:a.email}}).then((e=>{}))};d((()=>{q({url:"v1/api/captcha"}).then((e=>{i.value=e.data.captchaImg}))}));const j=e=>{},x=e=>{};return(e,u)=>{const c=l,d=s,_=P,z=O,C=b("router-link"),k=r;return p(),m("section",A,[h("div",S,[h("div",F,[G,n(k,{model:a,autocomplete:"on",onFinish:j,onFinishFailed:x,class:"login-form animate__animated animate__fadeInRight"},{default:f((()=>[n(d,{name:"username",rules:[{required:!0,message:"Please input your username!"}]},{default:f((()=>[n(c,{value:a.username,"onUpdate:value":u[0]||(u[0]=e=>a.username=e),placeholder:"用户名",size:"large"},null,8,["value"])])),_:1}),n(d,{name:"email",rules:[{required:!0,message:"Please input your username!"}]},{default:f((()=>[n(c,{value:a.email,"onUpdate:value":u[1]||(u[1]=e=>a.email=e),placeholder:"邮箱",size:"large"},null,8,["value"])])),_:1}),n(d,{name:"emailCaptcha",rules:[{required:!0,message:"Please input your username!"}]},{default:f((()=>[h("div",E,[n(c,{value:a.emailCaptcha,"onUpdate:value":u[2]||(u[2]=e=>a.emailCaptcha=e),placeholder:"验证码",size:"large",style:{"flex-grow":"10"}},null,8,["value"]),t.isGetting?(p(),v(_,{key:0,style:{height:"40px"}},{default:f((()=>[g(w(t.restTime)+"秒后重发 ",1)])),_:1})):(p(),v(_,{key:1,style:{height:"40px"},onClick:o},{default:f((()=>[g(" 获取验证码 ")])),_:1}))])])),_:1}),n(d,{name:"password",rules:[{required:!0,message:"Please input your password!"}]},{default:f((()=>[n(z,{value:a.password,"onUpdate:value":u[3]||(u[3]=e=>a.password=e),placeholder:"密码",size:"large"},null,8,["value"])])),_:1}),n(d,{name:"rePassword",rules:[{required:!0,message:"Please input your password!"}]},{default:f((()=>[n(z,{value:a.rePassword,"onUpdate:value":u[4]||(u[4]=e=>a.rePassword=e),placeholder:"确认密码",size:"large"},null,8,["value"])])),_:1}),n(d,{name:"captcha",rules:[{required:!0,message:"Please input your username!"}]},{default:f((()=>[h("div",L,[n(c,{value:a.captcha,"onUpdate:value":u[5]||(u[5]=e=>a.captcha=e),placeholder:"验证码",size:"large",style:{"flex-grow":"10"}},null,8,["value"]),h("button",M,[h("img",{src:i.value},null,8,R)])])])),_:1}),n(d,null,{default:f((()=>[n(_,{type:"primary","html-type":"submit",style:{width:"100%",height:"40px"}},{icon:f((()=>[n(y(T))])),default:f((()=>[g(" 注册")])),_:1})])),_:1}),n(d,null,{default:f((()=>[n(C,{to:"/login"},{default:f((()=>[g("已有账号?点击登录")])),_:1})])),_:1})])),_:1},8,["model"])])])])}}}),[["__scopeId","data-v-6f15006e"]]);export{B as default};
